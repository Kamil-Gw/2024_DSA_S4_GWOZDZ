<HTML>
<HEAD>
	<SCRIPT>
		// const debug = document.getElementById('debug');
		var list = [];
		function writeList()
		{
			const authorsTextarea = document.getElementById('new-authors');
			if (list.length > 0)
			{
				authorsTextarea.value = list[0];
				for (var i = 1; i < list.length; ++i)
				{
					// Insert the author into the textarea.
					authorsTextarea.value = authorsTextarea.value.concat('; ', list[i]);
				}
			}
			else
			{
				authorsTextarea.value = '';
			}
		}
		function fill()
		{
			// Selection of the publication for edition.
			const selection = document.getElementById('main-selection');
			
			// Elements of the form.
			const titleInput = document.getElementById('new-title');
			const dateInput = document.getElementById('new-date');
			const conditionInput = document.getElementById('new-condition');
			const typeInput = document.getElementById('new-type');
			const isbnIssnInput = document.getElementById('new-isbn/issn');
			const authorsTextarea = document.getElementById('new-authors');
			
			const selectedId = String(selection.value);
			let correct = true;
			
			switch (selectedId)
			{
			case '1':
				titleInput.value = 'Book I';
				dateInput.value = '1111-11-11';
				conditionInput.value = '';
				typeInput.value = 'book';
				isbnIssnInput.value = '111-111-1111-111';
				list = ['Author A', 'Author B', 'Author C'];
				break;
			default:
				correct = false;
			}
			if (correct)
			{
				writeList();
				const removalSelection = document.getElementById('removal-selection');
				for (var i = 0; i < list.length; ++i)
				{
					// Insert the author into the removal selection list.
					var option = document.createElement('option');
					option.value = list[i];
					option.innerHTML = list[i];
					removalSelection.appendChild(option);
				}
			}
		}
		function addAuthor()
		{
			// The textarea for showing the output values.
			var outputField = document.getElementById('new-authors');

			// The custom input.
			const customInput1 = document.getElementById('new-name');
			const customInput2 = document.getElementById('new-surname');
			const customValue1 = String(customInput1.value).trim();
			const customValue2 = String(customInput2.value).trim();
			const customValue = customValue1.concat(' ', customValue2);
			if (customValue1 !== '' && customValue2 !== '' && !list.includes(customValue))
			{
				// Append to the textarea.
				if (outputField.value === '')
				{
					outputField.value = customValue;
				}
				else
				{
					outputField.value = outputField.value.concat('; ', customValue);
				}
				
				// Add to the list.
				list.push(customValue);
				
				// Add to the removal selection.
				const option = document.createElement('option');
				option.value = customValue;
				option.innerHTML = customValue;
				const removalSelection = document.getElementById('removal-selection');
				removalSelection.appendChild(option);
				
			}
			customInput1.value = '';
			customInput2.value = '';

			// The dropdown list.
			const selectionList = document.getElementById('addition-selection');
			const selectionValue = selectionList.value;

			if (selectionValue !== '' && !list.includes(selectionValue))
			{
				if (outputField.value === '')
				{
					outputField.value = selectionValue;
				}
				else
				{
					outputField.value = outputField.value.concat('; ', selectionValue);
				}
				list.push(selectionValue);
			}
			selectionList.value = '';
		}
		function removeAuthor()
		{
			const removalSelection = document.getElementById('removal-selection');
			const index = list.indexOf(removalSelection.value);
			if (index > -1)
			{
				list.splice(index, 1);
				writeList();
			}
		}
	</SCRIPT>
</HEAD>
<BODY>
	
	<TEXTAREA id="debug" style="font-family: 'Helvetica';"></TEXTAREA>
	
	<FORM>
		<TABLE border="1" style="background-color: #FAFAFF;">
			<TR>
				<TD colspan="2" align="center">
				
					<!-- Select the title of the book that shall be editted -->
					<SELECT id="main-selection" name="id">
						<OPTION value=""> -- Select -- </OPTION>
						<OPTION value="1">Title of publication with ID=1</OPTION>
						<OPTION value="2">Title of publication with ID=2</OPTION>
						<OPTION value="3">Title of publication with ID=3</OPTION>
						<OPTION value="4">Title of publication with ID=4</OPTION>
					</SELECT>
					<BUTTON type="button" onClick="fill()">Edit</BUTTON>
					
				</TD>
			</TR>
			<TR>
				<TH>New title:</TH>
				<TD>
				
					<INPUT id="new-title" name="title" type="text"/>
				
				</TD>
			</TR>
			<TR>
				<TH>New date of publication:</TH>
				<TD>
				
					<INPUT id="new-date" name="date" type="date"/>
				
				</TD>
			</TR>
			<TR>
				<TH>New condition:</TH>
				<TD>
				
					<SELECT id="new-condition" name="condition">
						<OPTION value="">Select</OPTION>
						<OPTION value="like_new">Like new</OPTION>
						<OPTION value="excellent">Excellent</OPTION>
						<OPTION value="very_good">Very good</OPTION>
						<OPTION value="good">Good</OPTION>
						<OPTION value="acceptable">Acceptable</OPTION>
						<OPTION value="poor">Poor</OPTION>
					</SELECT>
					
				</TD>
			</TR>
			<TR>
			
				<TH>New publication type:</TH>
				<TD>
					<SELECT id="new-type" name="type">
						<OPTION value="">Select</OPTION>
						<OPTION value="book">Book</OPTION>
						<OPTION value="journal">Journal</OPTION>
					</SELECT>
				</TD>
				
			</TR>
			<TR>
				<TH>New ISBN/ISSN:</TH>
				<TD>
				
					<INPUT id="new-isbn/issn" name="isbn/issn" type="text"/>
				
				</TD>
			</TR>
			<TR>
			
				<TH>New Authors:</TH>
				<TD>
					<TEXTAREA id="new-authors" name="authors" style="width: 300px; height: 100px; font-family: 'Arial';" readonly></TEXTAREA><BR/>
					
					<SELECT id="removal-selection">
						<OPTION value="">Select author to remove</OPTION>
					</SELECT>
					
					<BUTTON type="button" onClick="removeAuthor()">Remove</BUTTON><BR/>
					
					<SELECT id="addition-selection">
						<OPTION value="">Select author to add</OPTION>
					</SELECT><BR/>
					
					<INPUT id="new-name" placeholder="Name to add"/>
					<INPUT id="new-surname" placeholder="Surname to add"/><BR/>
					
					<BUTTON type="button" onClick="addAuthor()">Add</BUTTON>
				
				</TD>
			</TR>
		</TABLE>
	</FORM>
</BODY>
</HTML>